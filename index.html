<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metronome</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <h1>Metronome</h1>
    <label for="tempo">Tempo (BPM):</label>
    <input type="number" id="tempo" value="120">
    <div class="divider"></div>

    <label for="beats">Beats per Measure:</label>
    <input type="number" id="beats" value="4">
    <label for="noteValue">Note Value Per Beat:</label>
    <select id="noteValue">
        <option value="4">4</option>
        <option value="8">8</option>
        <option value="16">16</option>
    </select>
    <div class="divider"></div>

    <label for="sound">Sound:</label>
    <select id="sound">
        <option value="hi-hat">Hi-hat</option>
        <option value="beep-high">Beep High</option>
        <option value="bubble">Bubble</option>
        <option value="clave">Clave</option>
        <option value="pop high">Pop High</option>
        <option value="switch">Switch</option>
        <option value="high tone">High Tone</option>
        <option value="medium tone">Medium Tone</option>
        <option value="low tone">Low Tone</option>
    </select>
    <div class="beat-indicator" id="beatIndicator">(Beat indicator)</div>
    <div id="beatBoxes" class="beat-boxes"></div>
    <div class="controls">
        <button id="start">Start</button>
        <button id="stop">Stop</button>
    </div>
    
    <div class="divider"></div>
    <h2>Practice Mode</h2>
    <label for="increase-tempo">Increase Tempo: Every</label>
    <input type="number" id="increase-tempo" value="4" min="1" max="20"> measures,
    
    <label for="increase-amount">increase BPM by:</label>
    <input type="number" id="increase-amount" value="1" min="1" max="30">

    <div class="controls">
        <button id="practiceOn">Practice Mode On/Off</button>
    </div>

    <!-- Removed Polyrhythm Mode Section -->

    <script src="metronome.js"></script> 
    <script>
        function resumeAudioContext() {
            if (typeof AudioContext !== "undefined") {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                if (audioCtx.state === 'suspended') {
                    audioCtx.resume().then(() => {
                        startMetronome();
                    });
                } else {
                    startMetronome();
                }
            }
        }

        function updateBeatBoxes() {
            const beats = document.getElementById('beats').value;
            const beatBoxes = document.getElementById('beatBoxes');
            beatBoxes.innerHTML = '';
            for (let i = 0; i < beats; i++) {
                const box = document.createElement('div');
                box.className = 'beat-box';
                beatBoxes.appendChild(box);
            }
        }

        document.getElementById('beats').addEventListener('input', updateBeatBoxes);
        updateBeatBoxes(); // Initial call to set up beat boxes

        document.getElementById('start').addEventListener('click', function() {
            this.disabled = true;
            this.style.backgroundColor = 'gray';
            resumeAudioContext();
        });

        document.getElementById('stop').addEventListener('click', function() {
            stopMetronome();
            document.getElementById('start').disabled = false;
            document.getElementById('start').style.backgroundColor = '';
        });
    </script>
</body>
</html>
